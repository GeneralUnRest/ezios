#!/usr/bin/env node

var verb = process.argv[2],
    fs = require('fs'),
    path = require('path')

if (verb == 'init') {
    var configpath = ''
    if (process.env.XDG_CONFIG_HOME)
        configpath = process.env.XDG_CONFIG_HOME
    else if (process.env.HOME)
        configpath = process.env.HOME
    else
        throw 'No valid environment to store configs'

    fs.createReadStream(
        path.join(__dirname, '../config/test.js')
    ).pipe(fs.createWriteStream(
        path.join(configpath, '.mon.js')
    ))

    console.log(`Configuration was written to ${path.join(configpath, '.mon.js')}.
Please make sure to change the defaults.`)
}
else if (verb == 'start') {
    require(path.join(__dirname, '../index.js'))
}

